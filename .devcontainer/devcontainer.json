// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/python
{
  // 1. SET THE CONTAINER NAME
  // This is the custom name for your container.
  // Note: Docker requires container names to be unique. If you try to run another
  // container with this same name, it will fail.
  "name": "WrestlerRanking",

  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
  "build": {
    // Path is relative to the devcontainer.json file.
    "dockerfile": "../Dockerfile"
  },

  // 2. SET CONTAINER PROPERTIES (LIKE NETWORK)
  // Use 'runArgs' to pass arguments directly to the 'docker run' command.
  "runArgs": [
    // This connects your container directly to your computer's network.
    // Useful for servers or tools that need to discover devices on your local network.
    "--network=host"
  ],

  // 3. AUTOMATICALLY INSTALL PACKAGES
  // 'postCreateCommand' runs as the container user ('appuser') after the container is ready.
  // We now only need it to install our python packages.
  "postCreateCommand": "pip3 install -r requirements.txt",

  // 4. MOUNT LOCAL FILES (The Default Behavior)
  // VS Code automatically mounts your project folder into the container.
  // The 'workspaceFolder' property tells VS Code where in the container to open it.
  "workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}",

  // 5. MOUNT ADDITIONAL LOCAL FILES
  // Use 'mounts' to add other local files or folders into the container.
  "mounts": [
    // This mounts your local settings.json into the container.
    // 'source' is the path on your local machine. ${localEnv:HOME} is a variable for your home directory.
    // 'target' is the path inside the container.
    // 'type=bind' means it's a direct link to your local file.
    // 'readonly' prevents the container from writing changes back to your local file.
    "source=${localEnv:HOME}/.gemini/settings.json,target=/home/appuser/.gemini/settings.json,type=bind,readonly"
  ],

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.debugpy",
        "ms-python.vscode-pylance",
        "google.geminicodeassist",
        "ms-mssql.data-workspace-vscode",
        "ms-mssql.sql-bindings-vscode",
        "ms-mssql.sql-database-projects-vscode",
        "ms-mssql.mssql"
      ]
    }
  }

  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // "forwardPorts": [],

  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
  // "remoteUser": "root"
}
